"use client";
import { useEffect, useRef } from "react";

export default function Section01() {
  const section01 = useRef(null);

  // 이전 스크립트의 동작을 담당하는 useEffect Hook
  useEffect(() => {
    const handleMouseMove = (e) => {
      section01.current.querySelectorAll(".layer").forEach((layer) => {
        const speed = layer.getAttribute("data-speed");
        const x = (window.innerWidth - e.pageX * speed) / 100;
        const y = (window.innerHeight - e.pageY * speed) / 100;
        layer.style.transform = `translateX(${x}px) translateY(${y}px)`;
      });
    };

    const draggable = ($targets) => {
      $targets.forEach(($target) => {
        let isPress = false,
          prevPosX = 0,
          prevPosY = 0;

        const start = (e) => {
          prevPosX = e.clientX;
          prevPosY = e.clientY;
          isPress = true;
        };

        const move = (e) => {
          if (!isPress) return;
          const posX = prevPosX - e.clientX;
          const posY = prevPosY - e.clientY;
          prevPosX = e.clientX;
          prevPosY = e.clientY;
          $target.style.left = $target.offsetLeft - posX + "px";
          $target.style.top = $target.offsetTop - posY + "px";
        };

        const end = () => {
          isPress = false;
        };

        $target.addEventListener("mousedown", start);
        $target.addEventListener("mouseup", end);
        window.addEventListener("mousemove", move);

        return () => {
          $target.removeEventListener("mousedown", start);
          $target.removeEventListener("mouseup", end);
          window.removeEventListener("mousemove", move);
        };
      });
    };

    if (section01.current) {
      section01.current.addEventListener("mousemove", handleMouseMove);
      draggable(section01.current.querySelectorAll(".mover"));
    }
    // 이벤트 리스너를 추가하기 전에 section01.current가 null이 아닌지 먼저 확인
    return () => {
      if (!section01.current) {
        return;
      }
      section01.current.removeEventListener("mousemove", handleMouseMove);
    };
  }, []);

  return (
    <section ref={section01} id="section01" className="section section01">
      <div className="txtArea">
        <h2>
          KW<span>O</span>N JUN HEE, P<span>O</span>RTF<span>O</span>LI
          <span>O</span>
        </h2>
        <h2>Publisher & FrontEnd</h2>
      </div>
      <div className="mover mover01 layer" data-speed="6">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="188"
          height="187"
          viewBox="0 0 188 187"
          fill="none"
        >
          <path
            className="outLinePath"
            d="M0 93.26C0 41.75 41.76 0 93.26 0C158.668 0 188 53.4301 188 93.26C188 133.09 157.74 186.09 97.5 186.09C37.26 186.09 0 144.77 0 93.26Z"
            fill="#040000"
          />
          <path
            d="M93.2501 174.68C48.3501 174.68 11.8301 138.15 11.8301 93.2598C11.8301 48.3698 48.3601 11.8398 93.2501 11.8398C138.14 11.8398 174.67 48.3698 174.67 93.2598C174.67 138.15 138.15 174.68 93.2501 174.68Z"
            fill="#F8B85D"
          />
          <path
            d="M40.6603 73.0498C37.9303 85.8998 38.0403 99.4798 43.9603 111.45C48.7503 121.15 57.2303 128.4 67.1403 132.5C86.9803 140.72 111.44 135.69 126.63 120.58C136.9 110.37 141.91 96.4798 142.7 82.1998C142.99 76.8298 134.64 76.8498 134.35 82.1998C134.03 88.0198 132.92 93.7198 130.8 99.2598C129.17 103.51 126.11 108.64 123.23 111.98C116.89 119.34 108.91 124.08 99.7203 126.47C94.9203 127.72 91.4603 128.14 86.2903 128.03C81.4803 127.93 77.9603 127.39 73.0503 125.8C70.5503 124.99 69.6803 124.63 67.5003 123.53C65.4003 122.47 63.4003 121.23 61.5103 119.84C61.0103 119.48 61.5903 119.94 60.8103 119.29C60.4103 118.96 60.0103 118.62 59.6203 118.27C58.6903 117.44 57.7903 116.57 56.9403 115.66C55.1303 113.72 54.4703 112.85 53.0803 110.63C50.1203 105.9 48.4903 101.19 47.6403 95.3498C46.7603 89.2798 47.3303 81.7398 48.7103 75.2398C49.8203 70.0298 41.7803 67.7898 40.6603 73.0498Z"
            fill="#040000"
          />
          <path
            d="M99.9294 70.2096C100.159 70.6796 100.399 71.1396 100.629 71.6096C100.889 72.0996 101.249 72.4896 101.709 72.7796C102.109 73.1496 102.589 73.3996 103.129 73.5296C103.679 73.6996 104.239 73.7296 104.789 73.5996C105.349 73.5696 105.859 73.4096 106.339 73.0996C106.619 72.8796 106.899 72.6596 107.179 72.4496C107.699 71.9296 108.059 71.3096 108.249 70.6096C108.299 70.2396 108.349 69.8696 108.399 69.4996C108.399 68.7496 108.209 68.0396 107.829 67.3896C107.599 66.9196 107.359 66.4596 107.129 65.9896C106.869 65.4996 106.509 65.1096 106.049 64.8196C105.649 64.4496 105.169 64.1996 104.629 64.0696C104.079 63.8996 103.519 63.8696 102.969 63.9996C102.409 64.0296 101.899 64.1896 101.419 64.4996C101.139 64.7196 100.859 64.9396 100.579 65.1496C100.059 65.6696 99.6994 66.2896 99.5094 66.9896C99.4594 67.3596 99.4094 67.7296 99.3594 68.0996C99.3594 68.8596 99.5494 69.5596 99.9294 70.2096Z"
            fill="#040000"
          />
          <path
            d="M74.6891 66.9604C74.4991 67.4504 74.3191 67.9304 74.1291 68.4204C73.9591 68.9704 73.9291 69.5304 74.0591 70.0804C74.0891 70.6404 74.2491 71.1504 74.5591 71.6304C74.8191 72.1204 75.1791 72.5104 75.6391 72.8004C76.0391 73.1704 76.5191 73.4204 77.0591 73.5504C77.4291 73.6004 77.7991 73.6504 78.1691 73.7004C78.9191 73.7004 79.6291 73.5104 80.2791 73.1304C80.5591 72.9104 80.8391 72.6904 81.1191 72.4804C81.6391 71.9604 81.9991 71.3404 82.1891 70.6404C82.3791 70.1504 82.5591 69.6704 82.7491 69.1804C82.9191 68.6304 82.9491 68.0704 82.8191 67.5204C82.7891 66.9604 82.6291 66.4504 82.3191 65.9704C82.0591 65.4804 81.6991 65.0904 81.2391 64.8004C80.8391 64.4304 80.3591 64.1804 79.8191 64.0504C79.4491 64.0004 79.0791 63.9504 78.7091 63.9004C77.9591 63.9004 77.2491 64.0904 76.5991 64.4704C76.3191 64.6904 76.0391 64.9104 75.7591 65.1204C75.2491 65.6404 74.8891 66.2504 74.6891 66.9604Z"
            fill="#040000"
          />
        </svg>
      </div>
      <div className="mover mover02 layer" data-speed="-4">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="188"
          height="187"
          viewBox="0 0 188 187"
          fill="none"
        >
          <path
            className="outLinePath"
            d="M0 93.26C0 41.75 41.76 0 93.26 0C158.668 0 188 53.4301 188 93.26C188 133.09 157.74 186.09 97.5 186.09C37.26 186.09 0 144.77 0 93.26Z"
            fill="#040000"
          />
          <path
            d="M93.2501 174.68C48.3501 174.68 11.8301 138.15 11.8301 93.2598C11.8301 48.3698 48.3601 11.8398 93.2501 11.8398C138.14 11.8398 174.67 48.3698 174.67 93.2598C174.67 138.15 138.15 174.68 93.2501 174.68Z"
            fill="#F8B85D"
          />
          <path
            d="M40.6603 73.0498C37.9303 85.8998 38.0403 99.4798 43.9603 111.45C48.7503 121.15 57.2303 128.4 67.1403 132.5C86.9803 140.72 111.44 135.69 126.63 120.58C136.9 110.37 141.91 96.4798 142.7 82.1998C142.99 76.8298 134.64 76.8498 134.35 82.1998C134.03 88.0198 132.92 93.7198 130.8 99.2598C129.17 103.51 126.11 108.64 123.23 111.98C116.89 119.34 108.91 124.08 99.7203 126.47C94.9203 127.72 91.4603 128.14 86.2903 128.03C81.4803 127.93 77.9603 127.39 73.0503 125.8C70.5503 124.99 69.6803 124.63 67.5003 123.53C65.4003 122.47 63.4003 121.23 61.5103 119.84C61.0103 119.48 61.5903 119.94 60.8103 119.29C60.4103 118.96 60.0103 118.62 59.6203 118.27C58.6903 117.44 57.7903 116.57 56.9403 115.66C55.1303 113.72 54.4703 112.85 53.0803 110.63C50.1203 105.9 48.4903 101.19 47.6403 95.3498C46.7603 89.2798 47.3303 81.7398 48.7103 75.2398C49.8203 70.0298 41.7803 67.7898 40.6603 73.0498Z"
            fill="#040000"
          />
          <path
            d="M99.9294 70.2096C100.159 70.6796 100.399 71.1396 100.629 71.6096C100.889 72.0996 101.249 72.4896 101.709 72.7796C102.109 73.1496 102.589 73.3996 103.129 73.5296C103.679 73.6996 104.239 73.7296 104.789 73.5996C105.349 73.5696 105.859 73.4096 106.339 73.0996C106.619 72.8796 106.899 72.6596 107.179 72.4496C107.699 71.9296 108.059 71.3096 108.249 70.6096C108.299 70.2396 108.349 69.8696 108.399 69.4996C108.399 68.7496 108.209 68.0396 107.829 67.3896C107.599 66.9196 107.359 66.4596 107.129 65.9896C106.869 65.4996 106.509 65.1096 106.049 64.8196C105.649 64.4496 105.169 64.1996 104.629 64.0696C104.079 63.8996 103.519 63.8696 102.969 63.9996C102.409 64.0296 101.899 64.1896 101.419 64.4996C101.139 64.7196 100.859 64.9396 100.579 65.1496C100.059 65.6696 99.6994 66.2896 99.5094 66.9896C99.4594 67.3596 99.4094 67.7296 99.3594 68.0996C99.3594 68.8596 99.5494 69.5596 99.9294 70.2096Z"
            fill="#040000"
          />
          <path
            d="M74.6891 66.9604C74.4991 67.4504 74.3191 67.9304 74.1291 68.4204C73.9591 68.9704 73.9291 69.5304 74.0591 70.0804C74.0891 70.6404 74.2491 71.1504 74.5591 71.6304C74.8191 72.1204 75.1791 72.5104 75.6391 72.8004C76.0391 73.1704 76.5191 73.4204 77.0591 73.5504C77.4291 73.6004 77.7991 73.6504 78.1691 73.7004C78.9191 73.7004 79.6291 73.5104 80.2791 73.1304C80.5591 72.9104 80.8391 72.6904 81.1191 72.4804C81.6391 71.9604 81.9991 71.3404 82.1891 70.6404C82.3791 70.1504 82.5591 69.6704 82.7491 69.1804C82.9191 68.6304 82.9491 68.0704 82.8191 67.5204C82.7891 66.9604 82.6291 66.4504 82.3191 65.9704C82.0591 65.4804 81.6991 65.0904 81.2391 64.8004C80.8391 64.4304 80.3591 64.1804 79.8191 64.0504C79.4491 64.0004 79.0791 63.9504 78.7091 63.9004C77.9591 63.9004 77.2491 64.0904 76.5991 64.4704C76.3191 64.6904 76.0391 64.9104 75.7591 65.1204C75.2491 65.6404 74.8891 66.2504 74.6891 66.9604Z"
            fill="#040000"
          />
        </svg>
      </div>
      <div className="mover mover03 layer" data-speed="-12">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="188"
          height="187"
          viewBox="0 0 188 187"
          fill="none"
        >
          <path
            className="outLinePath"
            d="M0 93.26C0 41.75 41.76 0 93.26 0C158.668 0 188 53.4301 188 93.26C188 133.09 157.74 186.09 97.5 186.09C37.26 186.09 0 144.77 0 93.26Z"
            fill="#040000"
          />
          <path
            d="M93.2501 174.68C48.3501 174.68 11.8301 138.15 11.8301 93.2598C11.8301 48.3698 48.3601 11.8398 93.2501 11.8398C138.14 11.8398 174.67 48.3698 174.67 93.2598C174.67 138.15 138.15 174.68 93.2501 174.68Z"
            fill="#F8B85D"
          />
          <path
            d="M40.6603 73.0498C37.9303 85.8998 38.0403 99.4798 43.9603 111.45C48.7503 121.15 57.2303 128.4 67.1403 132.5C86.9803 140.72 111.44 135.69 126.63 120.58C136.9 110.37 141.91 96.4798 142.7 82.1998C142.99 76.8298 134.64 76.8498 134.35 82.1998C134.03 88.0198 132.92 93.7198 130.8 99.2598C129.17 103.51 126.11 108.64 123.23 111.98C116.89 119.34 108.91 124.08 99.7203 126.47C94.9203 127.72 91.4603 128.14 86.2903 128.03C81.4803 127.93 77.9603 127.39 73.0503 125.8C70.5503 124.99 69.6803 124.63 67.5003 123.53C65.4003 122.47 63.4003 121.23 61.5103 119.84C61.0103 119.48 61.5903 119.94 60.8103 119.29C60.4103 118.96 60.0103 118.62 59.6203 118.27C58.6903 117.44 57.7903 116.57 56.9403 115.66C55.1303 113.72 54.4703 112.85 53.0803 110.63C50.1203 105.9 48.4903 101.19 47.6403 95.3498C46.7603 89.2798 47.3303 81.7398 48.7103 75.2398C49.8203 70.0298 41.7803 67.7898 40.6603 73.0498Z"
            fill="#040000"
          />
          <path
            d="M99.9294 70.2096C100.159 70.6796 100.399 71.1396 100.629 71.6096C100.889 72.0996 101.249 72.4896 101.709 72.7796C102.109 73.1496 102.589 73.3996 103.129 73.5296C103.679 73.6996 104.239 73.7296 104.789 73.5996C105.349 73.5696 105.859 73.4096 106.339 73.0996C106.619 72.8796 106.899 72.6596 107.179 72.4496C107.699 71.9296 108.059 71.3096 108.249 70.6096C108.299 70.2396 108.349 69.8696 108.399 69.4996C108.399 68.7496 108.209 68.0396 107.829 67.3896C107.599 66.9196 107.359 66.4596 107.129 65.9896C106.869 65.4996 106.509 65.1096 106.049 64.8196C105.649 64.4496 105.169 64.1996 104.629 64.0696C104.079 63.8996 103.519 63.8696 102.969 63.9996C102.409 64.0296 101.899 64.1896 101.419 64.4996C101.139 64.7196 100.859 64.9396 100.579 65.1496C100.059 65.6696 99.6994 66.2896 99.5094 66.9896C99.4594 67.3596 99.4094 67.7296 99.3594 68.0996C99.3594 68.8596 99.5494 69.5596 99.9294 70.2096Z"
            fill="#040000"
          />
          <path
            d="M74.6891 66.9604C74.4991 67.4504 74.3191 67.9304 74.1291 68.4204C73.9591 68.9704 73.9291 69.5304 74.0591 70.0804C74.0891 70.6404 74.2491 71.1504 74.5591 71.6304C74.8191 72.1204 75.1791 72.5104 75.6391 72.8004C76.0391 73.1704 76.5191 73.4204 77.0591 73.5504C77.4291 73.6004 77.7991 73.6504 78.1691 73.7004C78.9191 73.7004 79.6291 73.5104 80.2791 73.1304C80.5591 72.9104 80.8391 72.6904 81.1191 72.4804C81.6391 71.9604 81.9991 71.3404 82.1891 70.6404C82.3791 70.1504 82.5591 69.6704 82.7491 69.1804C82.9191 68.6304 82.9491 68.0704 82.8191 67.5204C82.7891 66.9604 82.6291 66.4504 82.3191 65.9704C82.0591 65.4804 81.6991 65.0904 81.2391 64.8004C80.8391 64.4304 80.3591 64.1804 79.8191 64.0504C79.4491 64.0004 79.0791 63.9504 78.7091 63.9004C77.9591 63.9004 77.2491 64.0904 76.5991 64.4704C76.3191 64.6904 76.0391 64.9104 75.7591 65.1204C75.2491 65.6404 74.8891 66.2504 74.6891 66.9604Z"
            fill="#040000"
          />
        </svg>
      </div>
    </section>
  );
}
